"""
ST7789Vディスプレイで動作する、物理ベースのアニメーションデモ。

このスクリプトは、シンプルなボールのアニメーションを通じて、
組込み環境やシングルボードコンピュータで滑らかなグラフィックスを
実現するための、以下の主要なテクニックを実装しています。

1.  **numpyによる高速ピクセル変換:**
    PILのImageオブジェクトからLCD用のRGB565形式への変換を、
    numpyのベクトル化処理を用いて高速に実行します。

2.  **差分描画 (ダーティ矩形):**
    毎フレーム画面全体を更新するのではなく、ボールの移動によって変化が
    あった領域（ダーティ矩形）だけを特定し、その最小限の範囲のみを
    LCDに転送することで、データ転送量を劇的に削減します。

3.  **デルタタイムによる物理更新:**
    アニメーションの速度をフレームレートから独立させます。
    これにより、処理負荷が変動しても、ボールは常に人間が見て
    一定の速度で動くようになります。

4.  **フレームレート制限 (FPS Capping):**
    CPUリソースを100%使い切るのを防ぎ、指定したフレームレート
    （例: 30 FPS）を維持するように意図的に待機時間を挿入します。
    これにより、システムの負荷を軽減し、安定した動作を実現します。
"""
